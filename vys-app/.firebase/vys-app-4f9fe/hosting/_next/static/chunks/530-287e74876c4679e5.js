"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[530],{3530:(e,t,r)=>{r.d(t,{rc:()=>X,bL:()=>F});var a=r(3200),n=r(6241),i=r(1640),s=r(8845),o=r(6898),l=r(2070),d=r(2115),c=r(9733),u=r(4579),p=r(208),g=r(898),m=r(5732),f=r(1454),v=r(7645),h='const respond=r=>{self.postMessage(r)},workerToTabIds={};self.addEventListener("message",r=>{const e=r.data;switch(e.type){case"setTimeout":workerToTabIds[e.id]=setTimeout(()=>{respond({id:e.id}),delete workerToTabIds[e.id]},e.ms);break;case"clearTimeout":workerToTabIds[e.id]&&(clearTimeout(workerToTabIds[e.id]),delete workerToTabIds[e.id]);break;case"setInterval":workerToTabIds[e.id]=setInterval(()=>{respond({id:e.id})},e.ms);break;case"clearInterval":workerToTabIds[e.id]&&(clearInterval(workerToTabIds[e.id]),delete workerToTabIds[e.id]);break}});\n',E=(e,t={})=>{if("undefined"==typeof Worker)return null;try{let r=new Blob([e],{type:"application/javascript; charset=utf-8"}),a=globalThis.URL.createObjectURL(r);return new Worker(a,t)}catch{return console.warn("Clerk: Cannot create worker from blob. Consider adding worker-src blob:; to your CSP"),null}},T=()=>{let e=globalThis.setTimeout.bind(globalThis),t=globalThis.setInterval.bind(globalThis);return{setTimeout:e,setInterval:t,clearTimeout:globalThis.clearTimeout.bind(globalThis),clearInterval:globalThis.clearInterval.bind(globalThis),cleanup:v.l}},b=()=>{let e=0,t=()=>e++,r=new Map,a=(e,t)=>e?.postMessage(t),n=e=>{r.get(e.data.id)?.()},i=E(h,{name:"clerk-timers"});if(i?.addEventListener("message",n),!i)return T();let s=()=>{i||(i=E(h,{name:"clerk-timers"}),i?.addEventListener("message",n))};return{setTimeout:(e,n)=>{s();let o=t();return r.set(o,()=>{e(),r.delete(o)}),a(i,{type:"setTimeout",id:o,ms:n}),o},setInterval:(e,n)=>{s();let o=t();return r.set(o,e),a(i,{type:"setInterval",id:o,ms:n}),o},clearTimeout:e=>{s(),r.delete(e),a(i,{type:"clearTimeout",id:e})},clearInterval:e=>{s(),r.delete(e),a(i,{type:"clearInterval",id:e})},cleanup:()=>{i&&(i.terminate(),i=null,r.clear())}}};r(5649);var S=r(5155),R=r(9708),k=new Set(["firstName","lastName","emailAddress","username","password","phoneNumber","legalAccepted"]);function y(e){let t={};return e.forEach(({value:e,checked:r,type:a},n)=>{k.has(n)&&void 0!==e&&"checkbox"!==a&&(t[n]=e),k.has(n)&&void 0!==r&&"checkbox"===a&&(t[n]=r)}),t}var A=(0,p.mj)({actors:{attempt:(0,g.Sx)(({input:{fields:e,parent:t}})=>{let r=y(e);return t.getSnapshot().context.clerk.client.signUp.update(r)})},actions:{setFormErrors:({context:e,event:t})=>{(0,i.Ye)(t),e.formRef.send({type:"ERRORS.SET",error:t.error})},markFormAsProgressive:({context:e})=>{let t=e.parent.getSnapshot().context.clerk.client.signUp,r=t.missingFields.map(u.sF),a=t.optionalFields.map(u.sF),n=t.requiredFields.map(u.sF),i=new Map;for(let e of n.concat(a))e in t&&i.set(e,t[e]);e.formRef.send({type:"MARK_AS_PROGRESSIVE",missing:r,optional:a,required:n,defaultValues:i})},unmarkFormAsProgressive:({context:e})=>e.formRef.send({type:"UNMARK_AS_PROGRESSIVE"}),sendToNext:({context:e,event:t})=>e.parent.send({type:"NEXT",resource:t.output}),sendToLoading:i.mn},guards:{isStatusMissingRequirements:({context:e})=>{var t,r,a;return(null==(a=null==(r=null==(t=e.parent.getSnapshot().context.clerk)?void 0:t.client)?void 0:r.signUp)?void 0:a.status)==="missing_requirements"},hasMetPreviousMissingRequirements:({context:e})=>{let t=e.parent.getSnapshot().context.clerk.client.signUp,r=e.formRef.getSnapshot().context.fields,a=t.missingFields.map(u.sF);return 0===Array.from(e.formRef.getSnapshot().context.fields.keys()).filter(e=>{var t,n;return!a.includes(e)&&!(null==(t=r.get(e))?void 0:t.value)&&!(null==(n=r.get(e))?void 0:n.checked)}).length}},types:{}}).createMachine({id:"SignUpContinue",context:({input:e})=>({basePath:e.basePath||i.ii,formRef:e.formRef,parent:e.parent,loadingStep:"continue"}),entry:"markFormAsProgressive",onDone:{actions:"unmarkFormAsProgressive"},initial:"Pending",states:{Pending:{tags:["state:pending"],description:"Waiting for user input",on:{SUBMIT:{guard:(0,c.F)(["hasMetPreviousMissingRequirements",(0,c.E)("isStatusMissingRequirements")]),target:"Attempting",reenter:!0}}},Attempting:{tags:["state:attempting","state:loading"],entry:"sendToLoading",invoke:{id:"attempt",src:"attempt",input:({context:e})=>({parent:e.parent,fields:e.formRef.getSnapshot().context.fields}),onDone:{actions:["sendToNext","sendToLoading"]},onError:{actions:["setFormErrors","sendToLoading"],target:"Pending"}}}}}),I=["emailAddress","phoneNumber"],_=["firstName","lastName","emailAddress","username","phoneNumber"],P=(0,p.mj)({actors:{attempt:(0,g.Sx)(({input:{fields:e,parent:t,params:r}})=>{let a=y(e);return t.getSnapshot().context.clerk.client.signUp.create({...a,...r})}),attemptWeb3:(0,g.Sx)(({input:{parent:e,strategy:t}})=>{if("web3_metamask_signature"===t)return e.getSnapshot().context.clerk.client.signUp.authenticateWithMetamask();if("web3_coinbase_wallet_signature"===t)return e.getSnapshot().context.clerk.client.signUp.authenticateWithCoinbaseWallet();if("web3_okx_wallet_signature"===t)return e.getSnapshot().context.clerk.client.signUp.authenticateWithOKXWallet();throw new i.X$(`Unsupported Web3 strategy: ${t}`)}),thirdParty:i.tX},actions:{sendToNext:({context:e,event:t})=>e.parent.send({type:"NEXT",resource:t.output}),sendToLoading:i.mn,setFormRef:(0,f.a)(({event:e})=>({formRef:e.formRef})),setFormDisabledTicketFields:(0,f.b)(({context:e,enqueue:t})=>{if(!e.ticket)return;let r=e.formRef.getSnapshot().context.fields;for(let a of I)r.has(a)&&t.sendTo(e.formRef,{type:"FIELD.DISABLE",field:{name:a}})}),setFormErrors:(0,f.c)(({context:e})=>e.formRef,({event:e})=>((0,i.Ye)(e),{type:"ERRORS.SET",error:e.error})),setDefaultFormValues:({context:e})=>{let t=e.parent.getSnapshot().context.clerk.client.signUp,r=new Map;for(let e of _)e in t&&r.set(e,t[e]);e.formRef.send({type:"PREFILL_DEFAULT_VALUES",defaultValues:r})}},guards:{isMissingRequirements:({context:e})=>{var t,r,a;return(null==(a=null==(r=null==(t=e.parent.getSnapshot().context.clerk)?void 0:t.client)?void 0:r.signUp)?void 0:a.status)==="missing_requirements"},hasTicket:({context:e})=>!!e.ticket,isExampleMode:({context:e})=>!!e.parent.getSnapshot().context.exampleMode},types:{}}).createMachine({id:"SignUpStart",context:({input:e})=>({basePath:e.basePath||i.ii,formRef:e.formRef,parent:e.parent,loadingStep:"start",ticket:e.ticket}),entry:"setDefaultFormValues",initial:"Init",on:{SET_FORM:{actions:"setFormRef"}},states:{Init:{description:"Handle ticket, if present; Else, default to Pending state. Per tickets, `Attempting` makes a `signUp.create` request allowing for an incomplete sign up to contain progressively filled fields on the Start step.",always:[{guard:(0,c.D)(["hasTicket","isMissingRequirements"]),target:"Pending"},{guard:"hasTicket",target:"Attempting"},{target:"Pending"}]},Pending:{tags:["state:pending"],description:"Waiting for user input",on:{SUBMIT:{guard:(0,c.E)("isExampleMode"),target:"Attempting",reenter:!0},"AUTHENTICATE.WEB3":{guard:(0,c.E)("isExampleMode"),target:"AttemptingWeb3",reenter:!0}}},Attempting:{tags:["state:attempting","state:loading"],entry:"sendToLoading",invoke:{id:"attemptCreate",src:"attempt",input:({context:e})=>{let t={fields:e.formRef.getSnapshot().context.fields,parent:e.parent},r=e.ticket?{strategy:"ticket",ticket:e.ticket}:{};return{...t,params:r}},onDone:{actions:["setFormDisabledTicketFields","sendToNext","sendToLoading"]},onError:{actions:["setFormDisabledTicketFields","setFormErrors","sendToLoading"],target:"Pending"}}},AttemptingWeb3:{tags:["state:attempting","state:loading"],entry:"sendToLoading",invoke:{id:"attemptCreateWeb3",src:"attemptWeb3",input:({context:e,event:t})=>((0,p.DT)(t,"AUTHENTICATE.WEB3"),{parent:e.parent,strategy:t.strategy}),onDone:{actions:["sendToNext","sendToLoading"]},onError:{actions:["setFormErrors","sendToLoading"],target:"Pending"}}}}}),N=(e,t)=>{let r=[{type:"isFieldUnverified",params:{field:e}}];return t&&r.push({type:"isStrategyEnabled",params:{attribute:e,strategy:t}}),(0,c.D)(r)},C=(0,p.mj)({actors:{prepare:(0,g.Sx)(({input:{params:e,parent:t}})=>{let r=t.getSnapshot().context.clerk;return"email_link"===e.strategy&&e.redirectUrl&&(e.redirectUrl=r.buildUrlWithAuth(e.redirectUrl)),r.client.signUp.prepareVerification(e)}),attempt:(0,g.Sx)(async({input:{params:e,parent:t}})=>t.getSnapshot().context.clerk.client.signUp.attemptVerification(e)),attemptEmailLinkVerification:(0,g.SP)(({receive:e,sendBack:t,input:{parent:r}})=>{let{run:a,stop:n}=function({delayInMs:e}={delayInMs:1e3}){let t,r=b(),a=!1,n=()=>{t&&(r.clearTimeout(t),r.cleanup()),a=!0},i=async s=>{a=!1,await s(n),a||(t=r.setTimeout(()=>{i(s)},e))};return{run:i,stop:n}}(),s=r.getSnapshot().context.clerk;return a(async()=>s.client.signUp.reload().then(e=>{let r=e.status,a=e.verifications.emailAddress.status;if("complete"===r)return t({type:"EMAIL_LINK.VERIFIED",resource:e});switch(a){case"verified":case"transferable":case"expired":t({type:`EMAIL_LINK.${a.toUpperCase()}`,resource:e});break;case"failed":t({type:"EMAIL_LINK.FAILED",error:new i.jq("email-link-verification-failed","Email verification failed"),resource:e});break;default:return}n()}).catch(e=>{n(),new i.X$(e.message)})),e(e=>{"STOP"===e.type&&n()}),()=>n()})},actions:{resendableTick:(0,f.a)(({context:e})=>({resendable:1===e.resendableAfter,resendableAfter:e.resendableAfter>1?e.resendableAfter-1:e.resendableAfter})),resendableReset:(0,f.a)({resendable:!1,resendableAfter:i.k3}),sendToLoading:i.mn,setFormErrors:(0,f.c)(({context:e})=>e.formRef,({event:e})=>((0,i.Ye)(e),{type:"ERRORS.SET",error:e.error}))},guards:{isComplete:({context:e})=>"complete"===e.resource.status,isFieldUnverified:({context:e,event:t},{field:r})=>{let a=e.resource;return(null==t?void 0:t.type)==="NEXT"&&t.resource&&(a=t.resource),a.unverifiedFields.includes(r)},isResendable:({context:e})=>e.resendable||0===e.resendableAfter,isStrategyEnabled:({context:e},{attribute:t,strategy:r})=>{var a;return!!(null==(a=e.attributes)?void 0:a[t].verifications.includes(r))},shouldVerifyPhoneCode:N("phone_number"),shouldVerifyEmailLink:N("email_address","email_link"),shouldVerifyEmailCode:N("email_address","email_code")},delays:{emailLinkTimeout:3e5,resendableTimeout:1e3},types:{}}).createMachine({id:"SignUpVerification",initial:"Init",context:({input:e})=>({attributes:e.attributes,basePath:e.basePath||i.ii,loadingStep:"verifications",formRef:e.formRef,parent:e.parent,resendable:!1,resendableAfter:i.k3,resource:e.resource}),on:{NEXT:[{guard:"isComplete",actions:(0,f.s)(({event:e})=>({type:"NEXT",resource:e.resource}))},{description:"Validate via phone number",guard:"shouldVerifyPhoneCode",target:".PhoneCode"},{description:"Validate via email link",guard:"shouldVerifyEmailLink",target:".EmailLink"},{description:"Verify via email code",guard:"shouldVerifyEmailCode",target:".EmailCode"},{actions:(0,f.s)(({event:e})=>({type:"NEXT",resource:e.resource}))}]},states:{Init:{always:[{description:"Validate via phone number",guard:"shouldVerifyPhoneCode",target:"PhoneCode"},{description:"Validate via email link",guard:"shouldVerifyEmailLink",target:"EmailLink"},{description:"Verify via email code",guard:"shouldVerifyEmailCode",target:"EmailCode"},{actions:(0,f.s)(({context:e})=>({type:"NEXT",resource:e.resource}))}]},EmailLink:{tags:["verification:method:email","verification:category:link","verification:email_link"],initial:"Preparing",on:{RETRY:".Preparing","EMAIL_LINK.RESTART":{target:".Attempting",reenter:!0},"EMAIL_LINK.FAILED":{actions:[{type:"setFormErrors",params:({event:e})=>({error:e.error})},(0,f.a)({resource:({event:e})=>e.resource})],target:".Pending"},"EMAIL_LINK.*":{actions:(0,f.b)(({enqueue:e,event:t})=>{"EMAIL_LINK.RESTART"!==t.type&&(e.assign({resource:t.resource}),e.raise({type:"NEXT",resource:t.resource}))})}},states:{Preparing:{tags:["state:preparing","state:loading"],exit:"resendableReset",invoke:{id:"prepareEmailLinkVerification",src:"prepare",input:({context:e})=>({parent:e.parent,params:{strategy:"email_link",redirectUrl:`${e.basePath}${i.Vu}`}}),onDone:{target:"Attempting",actions:(0,f.a)({resource:({event:e})=>e.output})},onError:{actions:"setFormErrors",target:"Pending"}}},Pending:{description:"Placeholder for allowing resending of email link",tags:["state:pending"],on:{NEXT:"Preparing"}},Attempting:{tags:["state:attempting"],invoke:{id:"attemptEmailLinkVerification",src:"attemptEmailLinkVerification",input:({context:e})=>({parent:e.parent})},after:{emailLinkTimeout:{description:"Timeout after 5 minutes",target:"Pending",actions:(0,f.c)(({context:e})=>e.formRef,{type:"ERRORS.SET",error:new i.jq("verify-email-link-timeout","Email link verification timed out")})}},initial:"NotResendable",states:{Resendable:{description:"Waiting for user to retry"},NotResendable:{description:"Handle countdowns",on:{RETRY:{actions:(0,f.l)(({context:e})=>`Not retriable; Try again in ${e.resendableAfter}s`)}},after:{resendableTimeout:[{description:"Set as retriable if countdown is 0",guard:"isResendable",actions:"resendableTick",target:"Resendable"},{description:"Continue countdown if not retriable",actions:"resendableTick",target:"NotResendable",reenter:!0}]}}}}}},EmailCode:{tags:["verification:method:email","verification:category:code","verification:email_code"],initial:"Preparing",states:{Preparing:{tags:["state:preparing","state:loading"],exit:"resendableReset",invoke:{id:"prepareEmailAddressCodeVerification",src:"prepare",input:({context:e})=>({parent:e.parent,params:{strategy:"email_code"}}),onDone:[{guard:"shouldVerifyEmailCode",target:"Pending"},{actions:[(0,f.a)({resource:({event:e})=>e.output}),(0,c.O)(({event:e})=>({type:"NEXT",resource:e.output}))]}],onError:{actions:"setFormErrors",target:"Pending"}}},Pending:{tags:["state:pending"],on:{RETRY:"Preparing",SUBMIT:{target:"Attempting",reenter:!0}},initial:"NotResendable",states:{Resendable:{description:"Waiting for user to retry"},NotResendable:{description:"Handle countdowns",on:{RETRY:{actions:(0,f.l)(({context:e})=>`Not retriable; Try again in ${e.resendableAfter}s`)}},after:{resendableTimeout:[{description:"Set as retriable if countdown is 0",guard:"isResendable",actions:"resendableTick",target:"Resendable"},{description:"Continue countdown if not retriable",actions:"resendableTick",target:"NotResendable",reenter:!0}]}}}},Attempting:{tags:["state:attempting","state:loading"],entry:"sendToLoading",invoke:{id:"attemptEmailAddressCodeVerification",src:"attempt",input:({context:e})=>{var t;return{parent:e.parent,params:{strategy:"email_code",code:(null==(t=e.formRef.getSnapshot().context.fields.get("code"))?void 0:t.value)||""}}},onDone:{actions:[(0,c.O)(({event:e})=>({type:"NEXT",resource:e.output})),"sendToLoading"]},onError:{actions:["setFormErrors","sendToLoading"],target:"Pending"}}}}},PhoneCode:{tags:["verification:method:phone","verification:category:code","verification:phone_code"],initial:"Preparing",states:{Preparing:{tags:["state:preparing","state:loading"],exit:"resendableReset",invoke:{id:"preparePhoneCodeVerification",src:"prepare",input:({context:e})=>({parent:e.parent,params:{strategy:"phone_code"}}),onDone:[{guard:"shouldVerifyPhoneCode",target:"Pending",actions:(0,f.a)({resource:({event:e})=>e.output})},{actions:[(0,f.a)({resource:({event:e})=>e.output}),(0,c.O)(({event:e})=>({type:"NEXT",resource:e.output}))]}],onError:{actions:"setFormErrors",target:"Pending"}}},Pending:{tags:["state:pending"],on:{RETRY:"Preparing",SUBMIT:{target:"Attempting",reenter:!0}},initial:"NotResendable",states:{Resendable:{description:"Waiting for user to retry"},NotResendable:{description:"Handle countdowns",on:{RETRY:{actions:(0,f.l)(({context:e})=>`Not retriable; Try again in ${e.resendableAfter}s`)}},after:{resendableTimeout:[{description:"Set as retriable if countdown is 0",guard:"isResendable",actions:"resendableTick",target:"Resendable"},{description:"Continue countdown if not retriable",actions:"resendableTick",target:"NotResendable",reenter:!0}]}}}},Attempting:{tags:["state:attempting","state:loading"],entry:"sendToLoading",invoke:{id:"attemptPhoneNumberVerification",src:"attempt",input:({context:e})=>{var t;return{parent:e.parent,params:{strategy:"phone_code",code:(null==(t=e.formRef.getSnapshot().context.fields.get("code"))?void 0:t.value)||""}}},onDone:{actions:[(0,c.O)(({event:e})=>({type:"NEXT",resource:e.output})),"sendToLoading"]},onError:{actions:["setFormErrors","sendToLoading"],target:"Pending"}}}}}}}),U=e=>({context:t},r)=>{var a,n;return null!=(n=null==(a=t.router)?void 0:a.match(e))&&n},M=e=>({context:t,event:r},a)=>{var n,i,s,o;return(null==(n=null==r?void 0:r.resource)?void 0:n.status)===e||(null==(o=null==(s=null==(i=t.clerk)?void 0:i.client)?void 0:s.signUp)?void 0:o.status)===e},L=(0,p.mj)({actors:{continueMachine:A,startMachine:P,thirdPartyMachine:i.tX,verificationMachine:C},actions:{clearFormErrors:(0,f.c)(({context:e})=>e.formRef,{type:"ERRORS.CLEAR"}),logUnknownError:e=>console.error("Unknown error:",e),navigateInternal:({context:e},{path:t,force:r=!1})=>{if(!e.router||!r&&(0,i.Y6)()||e.exampleMode)return;let a=(0,m.oq)(e.router.basePath,t);a!==e.router.pathname()&&e.router.shallowPush(a)},navigateExternal:({context:e},{path:t})=>{var r;return null==(r=e.router)?void 0:r.push(t)},raiseNext:(0,c.O)({type:"NEXT"}),setActive:({context:e,event:t},r)=>{var a;if(e.exampleMode)return;let n=(null==r?void 0:r.sessionId)||(null==r?void 0:r.useLastActiveSession)&&e.clerk.client.lastActiveSessionId||((null==t?void 0:t.resource)||e.clerk.client.signUp).createdSessionId;e.clerk.setActive({session:n,redirectUrl:e.clerk.buildAfterSignUpUrl({params:null==(a=e.router)?void 0:a.searchParams()})})},delayedReset:(0,c.O)({type:"RESET"},{delay:3e3}),setError:(0,f.a)({error:(e,{error:t})=>t||new i.X$("Unknown error")}),setFormOAuthErrors:({context:e})=>{let t,r=e.clerk.client.signIn.firstFactorVerification.error;if(r){switch(r.code){case i.OQ.NOT_ALLOWED_TO_SIGN_UP:case i.OQ.OAUTH_ACCESS_DENIED:case i.OQ.NOT_ALLOWED_ACCESS:case i.OQ.SAML_USER_ATTRIBUTE_MISSING:case i.OQ.OAUTH_EMAIL_DOMAIN_RESERVED_BY_SAML:case i.OQ.USER_LOCKED:case i.OQ.ENTERPRISE_SSO_USER_ATTRIBUTE_MISSING:case i.OQ.ENTERPRISE_SSO_EMAIL_ADDRESS_DOMAIN_MISMATCH:case i.OQ.ENTERPRISE_SSO_HOSTED_DOMAIN_MISMATCH:case i.OQ.SAML_EMAIL_ADDRESS_DOMAIN_MISMATCH:case i.OQ.ORGANIZATION_MEMBERSHIP_QUOTA_EXCEEDED_FOR_SSO:t=new i.jq(r.code,r.longMessage);break;default:t=new i.jq("unable_to_complete","Unable to complete action at this time. If the problem persists please contact support.")}e.formRef.send({type:"ERRORS.SET",error:t})}},transfer:({context:e})=>{var t;return null==(t=e.router)?void 0:t.push(e.clerk.buildSignInUrl())}},guards:{areFieldsMissing:({context:e})=>{var t,r,a,n;return(null==(n=null==(a=null==(r=null==(t=e.clerk)?void 0:t.client)?void 0:r.signUp)?void 0:a.missingFields)?void 0:n.length)>0},areFieldsUnverified:({context:e})=>{var t,r,a,n;return(null==(n=null==(a=null==(r=null==(t=e.clerk)?void 0:t.client)?void 0:r.signUp)?void 0:a.unverifiedFields)?void 0:n.length)>0},hasAuthenticatedViaClerkJS:({context:e})=>!!(null===e.clerk.client.signUp.status&&e.clerk.client.lastActiveSessionId),hasCreatedSession:({context:e})=>{var t;return!!(null==(t=e.router)?void 0:t.searchParams().get(i.kj.createdSession))},hasClerkStatus:({context:e},t)=>{var r;let a=null==(r=e.router)?void 0:r.searchParams().get(i.kj.status);return t?a===t.status:!!a},hasClerkTransfer:({context:e})=>{var t;return!!(null==(t=e.router)?void 0:t.searchParams().get(i.kj.transfer))},hasResource:({context:e})=>!!e.clerk.client.signUp,hasTicket:({context:e})=>!!e.ticket,isLoggedInAndSingleSession:(0,c.D)(["isLoggedIn","isSingleSessionMode",(0,c.E)("isExampleMode")]),isStatusAbandoned:M("abandoned"),isStatusComplete:({context:e,event:t})=>{var r,a;let n=null==t?void 0:t.resource,i=null==(a=null==(r=e.clerk)?void 0:r.client)?void 0:a.signUp;return(null==n?void 0:n.status)==="complete"&&!!(null==n?void 0:n.createdSessionId)||(null==i?void 0:i.status)==="complete"&&!!(null==i?void 0:i.createdSessionId)},isStatusMissingRequirements:M("missing_requirements"),isLoggedIn:(0,c.F)(["isStatusComplete",({context:e})=>!!e.clerk.user]),isSingleSessionMode:({context:e})=>{var t,r;return!!(null==(r=null==(t=e.clerk)?void 0:t.__unstable__environment)?void 0:r.authConfig.singleSessionMode)},isRestricted:({context:e})=>{var t,r;return(null==(r=null==(t=e.clerk)?void 0:t.__unstable__environment)?void 0:r.userSettings.signUp.mode)===i.P6.RESTRICTED},isRestrictedWithoutTicket:(0,c.D)(["isRestricted",(0,c.E)("hasTicket")]),isExampleMode:({context:e})=>!!e.exampleMode,isMissingRequiredFields:(0,c.D)(["isStatusMissingRequirements","areFieldsMissing"]),isMissingRequiredUnverifiedFields:(0,c.D)(["isStatusMissingRequirements","areFieldsUnverified"]),needsIdentifier:(0,c.F)(["statusNeedsIdentifier",U("/")]),needsContinue:(0,c.D)(["statusNeedsContinue",U("/continue")]),needsVerification:(0,c.D)(["statusNeedsVerification",U("/verify")]),needsCallback:U(i.aB),statusNeedsIdentifier:(0,c.F)([(0,c.E)("hasResource"),"isStatusAbandoned"]),statusNeedsContinue:(0,c.F)(["isMissingRequiredFields"]),statusNeedsVerification:(0,c.F)(["isMissingRequiredUnverifiedFields",(0,c.D)(["areFieldsMissing","hasClerkStatus"])])},delays:{"TIMEOUT.POLLING":3e5},types:{}}).createMachine({id:"SignUpRouter",context:{},initial:"Idle",on:{"AUTHENTICATE.OAUTH":{actions:(0,f.c)(i.AG,({context:e,event:t})=>{var r,a,n,s;return{type:"REDIRECT",params:{strategy:t.strategy,redirectUrl:`${(null==(r=e.router)?void 0:r.mode)===i.ew.virtual?null==(a=e.clerk.__unstable__environment)?void 0:a.displayConfig.signUpUrl:null==(n=e.router)?void 0:n.basePath}${i.aB}`,redirectUrlComplete:e.clerk.buildAfterSignUpUrl({params:null==(s=e.router)?void 0:s.searchParams()})}}})},"AUTHENTICATE.SAML":{actions:(0,f.c)(i.AG,({context:e})=>{var t,r,a,n,s;return{type:"REDIRECT",params:{strategy:"saml",emailAddress:null==(t=e.formRef.getSnapshot().context.fields.get("emailAddress"))?void 0:t.value,redirectUrl:`${(null==(r=e.router)?void 0:r.mode)===i.ew.virtual?null==(a=e.clerk.__unstable__environment)?void 0:a.displayConfig.signUpUrl:null==(n=e.router)?void 0:n.basePath}${i.aB}`,redirectUrlComplete:e.clerk.buildAfterSignUpUrl({params:null==(s=e.router)?void 0:s.searchParams()})}}})},"AUTHENTICATE.ENTERPRISE_SSO":{actions:(0,f.c)(i.AG,({context:e})=>{var t,r,a,n,s;return{type:"REDIRECT",params:{strategy:"enterprise_sso",emailAddress:null==(t=e.formRef.getSnapshot().context.fields.get("emailAddress"))?void 0:t.value,redirectUrl:`${(null==(r=e.router)?void 0:r.mode)===i.ew.virtual?null==(a=e.clerk.__unstable__environment)?void 0:a.displayConfig.signUpUrl:null==(n=e.router)?void 0:n.basePath}${i.aB}`,redirectUrlComplete:e.clerk.buildAfterSignUpUrl({params:null==(s=e.router)?void 0:s.searchParams()})}}})},"AUTHENTICATE.WEB3":{actions:(0,f.c)("start",({event:e})=>e)},"FORM.ATTACH":{description:"Attach/re-attach the form to the router.",actions:(0,f.b)(({enqueue:e,event:t})=>{e.assign({formRef:t.formRef}),e.raise({type:"RESET.STEP"})})},"NAVIGATE.PREVIOUS":".Hist","NAVIGATE.START":".Start",LOADING:{actions:(0,f.a)(({event:e})=>({loading:{isLoading:e.isLoading,step:e.step,strategy:e.strategy,action:e.action}}))},RESET:".Idle"},states:{Idle:{on:{INIT:{actions:(0,f.a)(({event:e})=>{var t;let r=null==(t=e.router)?void 0:t.searchParams();return{clerk:e.clerk,router:e.router,signInPath:e.signInPath||i.q3,loading:{isLoading:!1},exampleMode:e.exampleMode||!1,formRef:e.formRef,ticket:(null==r?void 0:r.get(i.kj.ticket))||(null==r?void 0:r.get(i.kj.invitationToken))||void 0}}),target:"Init"}}},Init:{entry:(0,f.b)(({context:e,enqueue:t,self:r})=>{var a,n;r.getSnapshot().children[i.AG]||t.spawnChild("thirdPartyMachine",{id:i.AG,systemId:i.AG,input:{basePath:null!=(n=null==(a=e.router)?void 0:a.basePath)?n:i.ii,flow:"signUp",formRef:e.formRef,parent:r}})}),always:[{guard:"isLoggedInAndSingleSession",actions:[(0,f.l)("Already logged in"),{type:"navigateExternal",params:({context:e})=>{var t;return{path:e.clerk.buildAfterSignUpUrl({params:null==(t=e.router)?void 0:t.searchParams()})}}}]},{guard:"needsCallback",target:"Callback"},{guard:"hasTicket",actions:{type:"navigateInternal",params:{force:!0,path:"/"}},target:"Start"},{guard:"needsVerification",actions:{type:"navigateInternal",params:{force:!0,path:"/verify"}},target:"Verification"},{guard:(0,c.F)(["needsContinue","hasClerkTransfer"]),actions:{type:"navigateInternal",params:{force:!0,path:"/continue"}},target:"Continue"},{guard:"isRestrictedWithoutTicket",target:"Restricted"},{actions:{type:"navigateInternal",params:{force:!0,path:"/"}},target:"Start"}]},Start:{tags:["step:start"],exit:"clearFormErrors",invoke:{id:"start",src:"startMachine",input:({context:e,self:t})=>{var r;return{basePath:null==(r=e.router)?void 0:r.basePath,formRef:e.formRef,parent:t,ticket:e.ticket}},onDone:{actions:"raiseNext"}},on:{"RESET.STEP":{actions:(0,f.b)(({enqueue:e,context:t})=>{e("clearFormErrors"),e.sendTo("start",{type:"SET_FORM",formRef:t.formRef})})},NEXT:[{guard:"isStatusComplete",actions:["setActive","delayedReset"]},{guard:(0,c.D)(["hasTicket","statusNeedsContinue"]),actions:{type:"navigateInternal",params:{path:"/"}},target:"Start",reenter:!0},{guard:"statusNeedsVerification",target:"Verification",actions:{type:"navigateInternal",params:{path:"/verify"}}},{guard:"statusNeedsContinue",actions:{type:"navigateInternal",params:{path:"/continue"}},target:"Continue"}]}},Continue:{tags:["step:continue"],invoke:{id:"continue",src:"continueMachine",input:({context:e,self:t})=>{var r;return{basePath:null==(r=e.router)?void 0:r.basePath,formRef:e.formRef,parent:t}},onDone:{actions:"raiseNext"}},on:{"RESET.STEP":{target:"Continue",reenter:!0},NEXT:[{guard:"isStatusComplete",actions:["setActive","delayedReset"]},{guard:"statusNeedsVerification",target:"Verification",actions:{type:"navigateInternal",params:{path:"/verify"}}}]}},Verification:{tags:["step:verification"],invoke:{id:"verification",src:"verificationMachine",input:({context:e,self:t})=>{var r,a;return{attributes:null==(r=e.clerk.__unstable__environment)?void 0:r.userSettings.attributes,basePath:null==(a=e.router)?void 0:a.basePath,formRef:e.formRef,parent:t,resource:e.clerk.client.signUp}},onDone:{actions:"raiseNext"}},always:[{guard:"hasCreatedSession",actions:[({context:e})=>{var t;return{type:"setActive",params:{sessionId:null==(t=e.router)?void 0:t.searchParams().get(i.kj.createdSession)}}},"delayedReset"]},{guard:{type:"hasClerkStatus",params:{status:"verified"}},actions:{type:"navigateInternal",params:{force:!0,path:"/continue"}}},{guard:{type:"hasClerkStatus",params:{status:"expired"}},actions:{type:"navigateInternal",params:{force:!0,path:"/"}}}],on:{"RESET.STEP":{target:"Verification",reenter:!0},NEXT:[{guard:"isStatusComplete",actions:["setActive","delayedReset"]},{guard:"statusNeedsContinue",actions:{type:"navigateInternal",params:{path:"/continue"}},target:"Continue"}]}},Callback:{tags:["step:callback"],entry:(0,f.c)(i.AG,{type:"CALLBACK"}),on:{NEXT:[{guard:"isStatusComplete",actions:["setActive","delayedReset"]},{description:"Handle a case where the user has already been authenticated via ClerkJS",guard:"hasAuthenticatedViaClerkJS",actions:[{type:"setActive",params:{useLastActiveSession:!0}},"delayedReset"]},{guard:"statusNeedsVerification",actions:{type:"navigateInternal",params:{path:"/verify"}},target:"Verification"},{guard:"statusNeedsContinue",actions:{type:"navigateInternal",params:{path:"/continue"}},target:"Continue"},{actions:{type:"navigateInternal",params:{path:"/"}},target:"Start"}]}},Restricted:{tags:["step:restricted"],on:{NEXT:"Start"}},Error:{tags:["step:error"],on:{NEXT:{target:"Start",actions:"clearFormErrors"}}},Hist:{type:"history",exit:"clearFormErrors"}}}),x=(0,c.A)(L,{inspect:i.Nn});function w({children:e,exampleMode:t,fallback:r,isRootPath:n}){let o=(0,s.ho)(),c=(0,a.cb)(),u=(0,i.xt)(),p=(0,l.d4)(x,e=>"Idle"!==e.value);return(0,d.useEffect)(()=>{if(!o||!c)return;let e=()=>{let e={type:"INIT",clerk:o,exampleMode:t,formRef:u,router:c,signInPath:i.q3};x.getSnapshot().can(e)&&x.send(e),u&&x.getSnapshot().can({type:"RESET.STEP"})&&x.send({type:"FORM.ATTACH",formRef:u})};"addOnLoaded"in o?o.addOnLoaded(e):e()},[o,t,null==u?void 0:u.id,!!c,o.loaded]),(0,S.jsxs)(i.xm.Provider,{actorRef:x,children:[n&&!p&&r?(0,S.jsx)(i.lV,{children:r}):null,o.loaded&&p?e:null]})}function F({children:e,exampleMode:t=!1,fallback:r=null,path:l,routing:d=i.ew.path}){var c,u;let p=(0,s.ho)(),g=(d===i.ew.virtual?n.cY:n.Ok)(),m=g.pathname(),f=null==(c=g.inferredBasePath)?void 0:c.call(g),v=l||f||i.ii,h=v===m;return null==(u=p.telemetry)||u.record((0,o.we)("Elements_SignUpRoot",{exampleMode:t,fallback:!!r,path:v,routing:d})),(0,S.jsx)(a._s.Provider,{value:g,children:(0,S.jsx)(a.Ix,{basePath:v,children:(0,S.jsx)(i.nF,{children:(0,S.jsx)(w,{exampleMode:t,fallback:r,isRootPath:h,children:e})})})})}x.start();var O={start:"NAVIGATE.START",previous:"NAVIGATE.PREVIOUS"},V=d.forwardRef(({asChild:e,to:t,...r},a)=>{let n=i.xm.useActorRef(),s=e?R.DX:"button",o=d.useCallback(()=>{let e=O[t];n.getSnapshot().can({type:e})?n.send({type:e}):console.warn(`Clerk: <SignUp.Action navigate="${t}"> is an invalid navigation event. You can only navigate to: ${Object.keys(O).join(", ")}.`)},[n,t]);return(0,S.jsx)(s,{...e?{}:{type:"button"},...r,onClick:o,ref:a})});V.displayName="SignInNavigate";var D=d.forwardRef(({asChild:e,fallback:t,...r},a)=>{let n=i.pz.useActorRef(!0);if(!n)throw Error('The resend action must be used within <SignUp.Step name="verifications">.');let s=(0,l.d4)(n,e=>({resendable:e.context.resendable,resendableAfter:e.context.resendableAfter}),(e,t)=>e.resendableAfter===t.resendableAfter&&e.resendable===t.resendable);if(t&&!s.resendable)return"function"==typeof t?t(s):t;let o=e?R.DX:"button";return(0,S.jsx)(o,{...e?{}:{type:"button"},...r,disabled:!s.resendable,onClick:()=>n.send({type:"RETRY"}),ref:a})});D.displayName="SignUpResend";var X=d.forwardRef((e,t)=>{let r,{submit:a,navigate:n,resend:s,...o}=e;return a?r=i.XT:n?r=V:s&&(r=D),r?(0,S.jsx)(r,{to:n,...o,ref:t}):null});X.displayName="SignUpAction",d.forwardRef(({asChild:e,children:t,...r},a)=>{if(!i.qk.useActorRef(!0))throw new i.X$('<Captcha> must be used within the <SignUp.Step name="start"> component.');let n=e?R.DX:"div";return(0,S.jsx)(n,{id:i.Wl,...r,ref:a})})}}]);